<% if session[:student_id] %>
<div class="topnav">
  <a><%= link_to "Home", :controller => "students", :action => "index" %></a>
  <a><%= link_to "My Books", :controller => "students", :action => "mybooks" %></a>
  <a><%= link_to "Edit My Profile", edit_student_path(session[:student_id])%></a>

  <a class="topcorner"><%= link_to "Sign Out", :controller => "students", :action => "logout"%></a>
  
</div>
<% end %>

<style type="text/css">
td
{
    padding:0 41px 0 30px;
}
</style>


<h1>List of Books</h1>
 <br/><br/>


 <form action="books/search">
  By Subject: &nbsp 
  <input type="text" name="subject" >
  By author:  
  <input type="text" name="author" >
  By Title:
  <input type="text" name="title" >
  <input type="submit" value="Submit">
</form> 




<table>
<th>ISBN</th> 
<th>title</th> 
<th>author</th> 
<th>Language</th> 
<th>Published</th> 
<th>Edition</th> 
<th>Subject</th> 
<th>Special Collection</th> 
<th>Summary</th>
  <%if session[:role] == 'librarian' %>
    <th>Copies</th>
   <% end %>
<% if !@book.nil? then @book.each do |bk| %>
  <tr>
    <td><%= bk.ISBN %></td>
    <td><%= bk.title %></td>
    <td><%= bk.author %></td>
    <td><%= bk.language %></td>
    <td><%= bk.published %></td>
    <td><%= bk.edition %></td>
    <td><%= bk.subject %></td>
    <td><%= bk.specialcollection %></td>
    <td><%= bk.summary %></td>&nbsp
    <%if session[:role] == 'librarian' %>
      <td><%=bk.copies %></td>
      <td><%= link_to 'Edit',:controller => "books", :action => "edit", :id => bk.ISBN   %></td>
<!--      <td><%#= link_to "Delete",:controller => "books", :action => "delete", :id => bk.ISBN%></td>-->
      <td><%= link_to 'Destroy', destroy_path(bk),
                  data: { confirm: 'Are you sure?' } %></td>
      <td><%= link_to 'View',:controller => "books", :action => "show", :id => bk.ISBN   %></td>
      <% else %>
      <td><%= link_to 'Checkout',:controller => "books", :action => "checkout", :ISBN => bk.ISBN , :library_id => bk.library_id, :bookname => bk.title  %></td>
      <td><%= link_to 'Bookmark',:controller => "books", :action => "book_bookmark", :ISBN => bk.ISBN , :library_id => bk.library_id, :bookname => bk.title  %></td>
     <% end %>
    <br>
  </tr>

<% end %>
<% end %>
</table>
